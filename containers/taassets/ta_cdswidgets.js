function setupPhoto(e,t,n){var o=photoInfo.length;photoInfo[o]=new Object,photoInfo[o].uniq=n,photoInfo[o].index=t,photoInfo[o].photos=new Array;for(var l=e.split("http"),i=1;i<l.length;i++){var a="http"+l[i];i==l.length-1&&(a=a.substring(0,a.length-1)),", "==a.substring(a.length-2)&&(a=a.substring(0,a.length-2)),","==a.substring(a.length-1)&&(a=a.substring(0,a.length-1)),photoInfo[o].photos[i-1]=a}}function clearPhotoInfo(e){for(var t=-1,n=0;n<photoInfo.length;n++)if(photoInfo[n].uniq==e.value){t=n;break}-1!=t&&(photoInfo[t]=new Object,photoInfo[t].uniq=-1,photoInfo[t].index=-1,photoInfo[t].photos=new Array)}function changePhoto(e,t,n,o){for(var l=-1,i=0;i<photoInfo.length;i++)if(photoInfo[i].uniq==t){l=i;break}-1==l&&(setupPhoto(o,n,t),l=photoInfo.length-1);var a=photoInfo[l].index+e;a>=photoInfo[l].photos.length?a=0:a<0&&(a=photoInfo[l].photos.length-1),photoInfo[l].index=a;var r=photoInfo[l].photos[a];if(null!=r){var d=r.split("!");if(null!=d){var s=d[0],u=document.getElementById("photoImage"+photoInfo[l].uniq);if(null!=u&&u.setAttribute("src",s),d.length>1){var c=d[1],g=document.getElementById("photoAttribution"+photoInfo[l].uniq);if(null!=g){for(var h=document.createTextNode(c);null!=g.firstChild;)g.removeChild(g.firstChild);g.appendChild(h)}}}}}function doPopup(e,t){null!=t&&""!=t||(t="widgetPopupWin"),popwindow=window.open(e,t,"width=600,height=600,scrollbars=yes"),window.focus&&popwindow.focus()}function doPopupWithSize(e,t,n,o){null!=t&&""!=t||(t="widgetPopupWin"),popwindow=window.open(e,t,"width="+n+",height="+o+",scrollbars=1"),window.focus&&popwindow.focus()}function doNewTAWindow(e,t){return null!=t&&""!=t||(t="widgetNewTaWin"),window.open(e,t,"toolbar=1,resizable=1,menubar=1,location=1,status=1,scrollbars=1,width=800,height=600")}function doSort(e){var t=getElementsByName_iefix("dd","sortableReview");if(!(null==t||t.length<=1)){for(var n=new Array,o=0;o<t.length;o++){var l=t[o].id.split("-");null==e||0==e.indexOf("date")?n.push(l[1]+"-"+l[0]+"-"+l[2]):n.push(l[2]+"-"+l[0]+"-"+l[1])}n.sort(),e.indexOf("desc")>-1&&n.reverse();var i=document.createElement("div");for(o=0;o<n.length;o++){var a,r=n[o].split("-");a=null==e||0==e.indexOf("date")?r[1]+"-"+r[0]+"-"+r[2]:r[1]+"-"+r[2]+"-"+r[0];var d=document.getElementById(a);i.appendChild(d)}for(var s=document.getElementById("reviewsContainer");null!=s.firstChild;)s.removeChild(s.firstChild);s.appendChild(i)}}function doSortWithPages(e,t){var n=getElementsByName_iefix("dl","sortableReviewPair");if(!(null==n||n.length<=1)){for(var o=new Array,l=0;l<n.length;l++){var i=n[l].id.split("-");null==e||0==e.indexOf("date")?o.push(i[1]+"-"+i[0]+"-"+i[2]):0==e.indexOf("rating")?o.push(i[2]+"-"+i[0]+"-"+i[1]):0==e.indexOf("default")&&(i[0].substr(2,3)<10&&(i[0]="rr0"+i[0].charAt(2)),o.push(i[0]+"-"+i[1]+"-"+i[2]))}o.sort(),e.indexOf("desc")>-1&&o.reverse();var a=getElementsByName_iefix("div","review_page");if(!(null==a||a.length<=1)){var r=document.createElement("div");for(l=0;l<a.length;l++)for(var d=0;d<a[l].length;d++){var s=a[l][d];"sortableReviewPair"==s.nodename&&(a[l].removeChild(s),r.appendChild(s))}var u=0,c=1;for(l=0;l<o.length;l++){var g,h=document.getElementById("PAGING_INFO_"+c),f=o[l].split("-");"r"==f[0].charAt(0)&&"0"==f[0].charAt(2)&&(f[0]="rr"+f[0].charAt(3)),g=null==e||0==e.indexOf("date")?f[1]+"-"+f[0]+"-"+f[2]:0==e.indexOf("rating")?f[1]+"-"+f[2]+"-"+f[0]:f[0]+"-"+f[1]+"-"+f[2];var m=document.getElementById(g);a[c-1].insertBefore(m,h),++u==t&&(u=0,c++)}for(l=1;l<a.length;l++)a[l].hide();a[0].show()}}}function getElementsByName_iefix(e,t){var n=document.getElementsByTagName(e),o=new Array;for(i=0,iarr=0;i<n.length;i++)att=n[i].getAttribute("name"),att==t&&(o[iarr]=n[i],iarr++);return o}function expandReview(e,t,n){var o="none",l="block";0==n&&(o="block",l="none");for(var i=getElementsByName_iefix("dd","reviewText"),a=0;a<i.length;a++){var r=i[a];r.id==t+"short"+e?r.style.display=o:r.id==t+"full"+e?r.style.display=l:-1!=r.id.indexOf("short")?r.style.display="block":r.style.display="none"}window.sendHeight&&sendHeight()}function toggleLanguage(e,t){for(var n=getElementsByName_iefix("dd","sortableReview"),o=0;o<n.length;o++){var l=n[o];if(l.id.substr(0,1)==t){l.style.display="block";for(var i=l.getElementsByTagName("dd"),a=0;a<i.length;a++){var r=i[a],d=r.id;"full"!=d.substr(1,4)&&"short"!=d.substr(1,5)||(d.substr(d.length-e.length,e.length)==e?d.substr(0,5)==t+"full"?r.style.display="block":r.style.display="none":d.substr(0,6)==t+"short"?r.style.display="block":r.style.display="none")}}else l.style.display="none"}}function showElem(e){var t=document.getElementById(e);null!=t&&(t.style.display="block")}function hideElem(e){var t=document.getElementById(e);null!=t&&(t.style.display="none")}function setHref(e,t){var n=document.getElementById(e);null!=n&&n.setAttribute("href",t)}function changePane(e,t){changeTab(e);for(var n=$$("#list"+e+" div[name=propertyPane]"),o=0;o<n.length;++o)n[o].id=="list"+t+"Pane"?n[o].style.display="block":n[o].style.display="none"}function changeTab(e){var t=getElementsByName_iefix("a","propertyTab");if(!(null==t||t.length<=1)){for(var n=0;n<t.length;n++)t[n].id==e?t[n].className="tabSelected":t[n].className="";var o=getElementsByName_iefix("div","propertyList");if(!(null==o||o.length<=1)){for(n=0;n<o.length;n++)o[n].id=="list"+e?o[n].style.display="block":o[n].style.display="none";var l=document.getElementById("DESTSEARCH_FORM");null!=l&&null!=l.tab&&(l.tab.value=e)}}}function getPartnerPropertyLink(e,t,n,o,l,i){var a=null;return window.taPartnerPropertyLink&&"true"==l&&(a=taPartnerPropertyLink(t,n,o)),null==a?"new"==i&&"false"==l?void doNewTAWindow(e,"newTApropdetail"):void doPopup(e,"propdetail"):void partnerRedirect(a,i)}function getPartnerPropertyLinkForMap(e,t,n,o){var l=null;return window.taPartnerPropertyLink&&(l=taPartnerPropertyLink(t,n,o)),null!=l&&""!=l?l:e}function getPartnerBookingLink(e,t,n,o){var l=null;if(window.taPartnerBookingLink&&(null!=(l=taPartnerBookingLink(e,t,n))&&""!=l)){if(window.taPartnerBookingText){var i=taPartnerBookingText(e,t,n);if(null!=i&&""!=i)document.getElementById(o).innerHTML=i}return l}return null}function partnerRedirect(e,t){return null==t||""==t||"existing"==t?void(null==window.opener?window.top.location=e:window.opener.top.location=e):"new"==t?void doNewTAWindow(e,"tpbWin"):void 0}function doCRPopup(e,t){popwindow=window.open(e,t,"toolbar=0,resizable=1,menubar=0,location=0,status=0,scrollbars=1,width=255,height=730,screenX=5,left=5,screenY=5,top=5"),window.focus&&popwindow.focus()}function doMore(e){var t=document.getElementById(e+"full"),n=document.getElementById(e+"short");t.style.display="block",n.style.display="none"}function doLess(e){var t=document.getElementById(e+"full"),n=document.getElementById(e+"short");t.style.display="none",n.style.display="block"}function callForumWidget(e,t,n){var o=e+"/WidgetEmbed-cdsforum?locationId="+t+n;document.location=o}function pageNav(e,t,n){for(var o=0;o<n;o++){var l=document.getElementById(e+o),i=document.getElementById(e+"Link"+o);null!=l&&null!=l&&(o==t?(l.style.display="block",null!=i&&null!=i&&(i.style.cursor="default",i.style.color="#2c2c2c")):(l.style.display="none",null!=i&&null!=i&&(i.style.cursor="pointer",i.style.color="#202d95")))}}function doHacSearch(e,t){var n=t,o=document.getElementById(e);null!=o&&null!=o&&null!=t&&null!=t&&("/"!=t.substring(t.length-1)&&(n=t+"/"),doNewTAWindow(n=n+"HACSearch?geo="+o.geo.value+"&inDay="+o.inDay.value+"&inMonth="+o.inMonth.value+"&outDay="+o.outDay.value+"&outMonth="+o.outMonth.value+"&q="+o.hacGeo.value,"TAHacSearchWin"))}function doHacSearchWithMCID(e,t,n){var o=t,l=document.getElementById(e);null!=l&&null!=l&&null!=t&&null!=t&&("/"!=t.substring(t.length-1)&&(o=t+"/"),doNewTAWindow(o=o+"HACSearch?geo="+l.geo.value+"&m="+n+"&inDay="+l.inDay.value+"&inMonth="+l.inMonth.value+"&outDay="+l.outDay.value+"&outMonth="+l.outMonth.value+"&q="+l.hacGeo.value,"TAHacSearchWin"))}function doHacSearchWithMCIDNewStyle(e,t,n){var o=t,l=document.getElementById(e);if(null!=l&&null!=l&&null!=t&&null!=t){"/"!=t.substring(t.length-1)&&(o=t+"/");var i=l.inMonth.value;null!=i&&(i=i.replace("/","+"));var a=l.outMonth.value;null!=a&&(a=a.replace("/","+")),doNewTAWindow(o=o+"HACSearch?geo="+l.geo.value+"&m="+n+"&inDay="+l.inDay.value+"&inMonth="+i+"&outDay="+l.outDay.value+"&outMonth="+a,"TAHacSearchWin")}}function doDestSearch(e){var t=document.getElementById("DESTSEARCH_FORM");t.locationId.value=t.geo.value,hideElem("destSearchError");var n={url:"/WidgetEmbed",data:t,onFailure:function(e){showElem("destSearchError")},onSuccess:function(e){var t=document.getElementById("cdsDestContent");if(null!=t&&null!=t){t.innerHTML=e;var n=document.getElementById("DESTSEARCH_FORM");if(null!=n&&null!=n.tab){var o=document.getElementById("list"+n.tab.value);if(null!=o&&changeTab(n.tab.value),null!=o&&"Map"==n.tab.value||null==o&&"Map"==n.defaultTab.value){var l=document.getElementById("mapLatLongInfo");if(null!=l&&null!=l.childNodes){var i=l.childNodes[0].nodeValue;if(null!=i){var a=i.split(":");null!=a&&3==a.length&&ta.mapsv2.WidgetMap.showMap("theMap",parseFloat(a[0]),parseFloat(a[1]),parseInt(a[2]))}}}}}},evalScripts:!0};new Request(n).send(),clearPhotoInfo(t.uniq)}function doTOGSearch(e){var t=document.getElementById("CDSTOG_FORM");if(1!=checkTOGInput(t)){hideElem("cdsTogIntro"),showElem("cdsTogSpinner");var n={url:"/TankOfGas",data:t,onFailure:ta.util.error.ajaxFailure.partial("CdsWidgets:doTOGSearch"),onComplete:function(e){if(0==e.indexOf("ERROR"))showElem("tog_error_notfoundcity"),showElem("TOG_ERROR_MSG"),addElemClass("TANK_OF_GAS_FORM","cdsTogErr"),hideElem("cdsTogSpinner"),ta.id("TANK_RESULTS").empty();else{var t=document.getElementById("cdsTogResults");null!=t&&null!=t&&(t.innerHTML=e,t.style.display="block",hideElem("cdsTogIntro"),hideElem("cdsTogSpinner"))}sendHeight()}};new Request(n).send()}}function redoTOGSearch(e,t){var n=document.getElementById("CDSTOG_FORM");n.geo.value=e;for(var o=0;o<n.tog_range.length;o++)n.tog_range[o].value==t?n.tog_range[o].checked=!0:n.tog_range[o].checked=!1;doTOGSearch(n)}function checkTOGInput(e){hideElem("TOG_ERROR_MSG"),hideElem("tog_error_nocity"),hideElem("tog_error_notfoundcity"),hideElem("tog_error_range"),removeElemClass("TANK_OF_GAS_FORM","cdsTogErr"),removeElemClass("tog_city_label","cdsTogErr"),removeElemClass("tog_range_label","cdsTogErr"),removeElemClass("togGeoSearch","cdsTogErr");var t=!1;null!=e.q.value&&""!=e.q.value||(e.geo.value="",showElem("tog_error_nocity"),addElemClass("tog_city_label","cdsTogErr"),addElemClass("togGeoSearch","cdsTogErr"),t=!0);for(var n=!1,o=0;o<e.tog_range.length;o++)if(1==e.tog_range[o].checked){n=!0;break}return 0==n&&(showElem("tog_error_range"),addElemClass("tog_range_label","cdsTogErr"),t=!0),1==t&&(showElem("TOG_ERROR_MSG"),addElemClass("TANK_OF_GAS_FORM","cdsTogErr"),sendHeight(),!0)}function addElemClass(e,t){var n=document.getElementById(e);null!=n&&(n.className+=" "+t)}function removeElemClass(e,t){var n=document.getElementById(e);null!=n&&(n.className=n.className.replace(t,""))}function limitLength(e,t){null!=e&&null!=e.value&&e.value.length>=t&&(e.value=e.value.substr(0,t))}function initTextArea(e){null!=e&&(e.value="",e.onfocus=null,e.style.color="#2C2C2C")}function selectRating(e,t,n,o){if(null!=e&&null!=t&&0!=e.clientWidth){for(var l=e,i=0;l;)i+=l.offsetLeft,l=l.offsetParent;var a=(t.pageX?t.pageX-window.pageXOffset:t.clientX)-i,r=Math.ceil(a/e.clientWidth*5);document.body.className.match(/\brtl\b/)&&(r=6-r),e.className="widWRLRate ui_bubble_rating bubble_"+r+"0";var d=document.getElementById("ratingText"+o),s=document.getElementById("rating"+r+o);if(null!=d&&null!=s&&(d.innerHTML=s.value),n){var u=document.getElementById("qid10"+o);null!=u&&(u.value=r)}}}function lastSetRating(e,t){if(null!=e){var n=document.getElementById("qid10"+t);if(null!=n){var o=n.value,l=document.getElementById("rating"+o+t);if(null!=l){var i=l.value;e.className=0==o?"widWRLRate ui_bubble_rating bubble_00":"widWRLRate ui_bubble_rating bubble_"+o+"0";var a=document.getElementById("ratingText"+t);null!=a&&(a.innerHTML=i)}}}}function checkTextArea(e){var t=document.getElementById("taWRLTitle"+e),n=document.getElementById("defaultTitle"+e),o=document.getElementById("reviewTitle"+e);if(null!=t&&null!=n&&null!=o){n.value==t.value?o.value="":o.value=encodeURIComponent(t.value);var l=document.getElementById("cdsWRLForm"+e);null!=l&&l.submit()}}function checkSearchBox(e,t){null!=e&&e.value==t&&(e.value="",e.onclick=null,e.style.color="#2C2C2C")}function togglePIDetails(e){"show"==e?(showElem("cdsPIHideReviews"),hideElem("cdsPIReadReviews"),showElem("cdsPIDetails"),window.sendHeight&&sendHeight()):(showElem("cdsPIReadReviews"),hideElem("cdsPIHideReviews"),hideElem("cdsPIDetails"),window.sendHeight&&sendHeight())}function resizeRatingsOnlyWidget(e){if(e){var t=document.getElementById(e.widgetDivId),n=t.children[0],o=document.getElementById(e.locDivId),l=o.children[0],i=e.maxLocFontSize||14,a=e.minLocFontSize||10,r=e.maxHeight;if(a>i&&(a=i),e.wide){for(;l.offsetHeight>r&&i>a;)l.style.fontSize=--i+"px";o.style.maxWidth=l.offsetWidth+1+"px",n.style.width="auto",t.style.width=n.offsetWidth+1+"px"}else for(;l.offsetHeight>r&&i>a;)l.style.fontSize=--i+"px"}}function resizeWidgetText(e){var t=document.getElementById(e.textDivId),n=e.maxLocFontSize||14,o=e.minLocFontSize||10,l=e.maxHeight,i=e.maxWidth;if(t&&l&&i){for(o>n&&(o=n);(t.offsetHeight>l||t.offsetWidth>i)&&n>o;)t.style.fontSize=--n+"px";e.verticalCenter&&(centerDiv=document.getElementById(e.centerId),centerDiv.style.marginTop=(l-t.offsetHeight)/2+"px",centerDiv.style.marginTop=(l-t.offsetHeight)/2+"px")}}var photoInfo=new Array,ta=ta||{};ta.cds=ta.cds||{},ta.cds.handleTALink=function(e,t){if("undefined"!=typeof Cookie&&void 0!==Cookie.writeSession&&"undefined"!=typeof cookieDomain&&Cookie&&Cookie.writeSession&&cookieDomain&&window.location.hostname.match(cookieDomain)&&Cookie.writeSession("MC",e))return!0;if(void 0===t)return!1;var n=null;if("string"==typeof t.pathname)n=t.pathname;else{if("string"!=typeof t.action)return!1;var o=document.createElement("a");o.href=t.action,n=o.pathname}var l=n.split(".");return l[0]=l[0]+"-m"+e,n=l.join("."),"string"==typeof t.pathname?t.pathname=n:"string"==typeof t.action&&(o.pathname=n,t.action=o.href),!0},ta.cds.widgetErrors={noReviews:"TA_noReviews",widgetError:"TA_widgetError"},ta.cds.msgPartner=function(e){window.parent.postMessage(e,"*")},ta.cds.sendWidgetInfo=function(e,t){var n=window.document,o=Math.max(n.body.scrollHeight,n.documentElement.scrollHeight,n.body.offsetHeight,n.documentElement.offsetHeight,n.body.clientHeight,n.documentElement.clientHeight),l=Math.max(n.body.scrollWidth,n.documentElement.scrollWidth,n.body.offsetWidth,n.documentElement.offsetWidth,n.body.clientWidth,n.documentElement.clientWidth),i={frameName:window.name,widgetData:{width:l,height:o}};if(t)for(var a in t)i.widgetData[a]=t[a];e&&(i.error=e),ta.cds.msgPartner(i),ta.cds.msgPartner(JSON.stringify(i))},ta.cds.informPartnerOfError=function(){ta.cds.msgPartner(ta.cds.widgetErrors.widgetError),ta.cds.sendWidgetInfo(ta.cds.widgetErrors.widgetError)},ta.cds.addOnload=function(e,t){var n=(t=t||window).onload;"function"!=typeof t.onload?t.onload=e:t.onload=function(){n&&n(),e&&e()}};
